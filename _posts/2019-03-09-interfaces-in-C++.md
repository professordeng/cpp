# interfaces in C++ (pure virtual functions)

在 `java` 语言中，有专门的关键字叫做接口（interface），在 C++ 中，纯虚函数的作用和接口一样，也可以称为抽象函数。

纯虚函数是一种特殊的虚函数，在基类中不能对虚函数给出有意义的实现，它的实现留给该基类的派生类去做。这就是纯虚函数的作用。

凡是含有纯虚函数的类叫做抽象类。这种类不能声明对象，只是作为基类为派生类服务。除非在派生类中完全实现基类中所有的的纯虚函数，否则，派生类也变成了抽象类，不能实例化对象。

1. 为了方便使用多态特性，我们常常需要在基类中定义虚函数。
2. 在很多情况下，基类本身生成对象是不合情理的。例如，动物作为一个基类可以派生出老虎、孔雀等子类，但动物本身生成对象明显不合常理。

为了解决上述问题，引入了纯虚函数的概念，将函数定义为纯虚函数 `virtual ReturnType Function()= 0;`。若要使派生类为非抽象类，则编译器要求在派生类中，必须对纯虚函数予以重写以实现多态性。同时含有纯虚函数的类称为抽象类，它不能生成对象。这样就很好地解决了上述两个问题。

## 多态性

指相同对象收到不同消息或不同对象收到相同消息时产生不同的实现动作。C++支持两种多态性：编译时多态性，运行时多态性。

1. 编译时多态性

   通过重载函数和运算符重载实现。

2. 运行时多态性

   通过虚函数和继承实现

## 虚函数

虚函数是在基类中被声明为virtual，并在派生类中重新定义的成员函数，可实现成员函数的动态重载。

## 实例

```c++
class A {
public:
	A();
	virtual ~A();
	void f1();
	virtual void f2();
	virtual void f3() = 0;
};

class B :public A {
public:
	B();
	virtual ~B();
	void f1();
	virtual void f2();
	virtual void f3();
};

int main() {
	A *m_j = new B();
	m_j->f1();
	m_j->f2();
	m_j->f3();
	delete m_j;
	return 0;
}
```

`f1()` 是一个隐藏，函数隐藏并没有重载，在不同的对象引用会有不同的动作。也就是说如果是 A 类引用则调用 A 类的函数，B 类引用就调用 B 类函数。

`f2()` 是重写（覆盖），派生类继承后会重写基类的虚函数，不论什么引用都是派生类的函数实现。

`f3()` 与 `f2()` 一样,只是在基类中不需要写函数实现。



